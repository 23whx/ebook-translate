# 环境变量配置说明

## 📝 .env 文件配置

在项目根目录下的 `.env` 文件中，请使用以下格式：

```env
# DeepSeek API Key（必需）
VITE_DEEPSEEK_API_KEY=sk-your-deepseek-api-key-here

# Hugging Face Token（可选，也可以在界面中输入）
VITE_HF_API_TOKEN=hf_your-huggingface-token-here
```

## ⚠️ 重要说明

### 1. 变量命名规范
在 Vite 项目中，环境变量**必须**以 `VITE_` 开头才能在客户端代码中访问。

✅ 正确：`VITE_DEEPSEEK_API_KEY`
❌ 错误：`DEEPSEEK_API_KEY` 或 `DEEPSEEK_API`

### 2. 重启开发服务器
修改 `.env` 文件后，**必须重启**开发服务器才能生效：

```bash
# 按 Ctrl+C 停止当前服务器
# 然后重新启动
npm run dev
```

### 3. 不要提交到 Git
`.env` 文件已包含在 `.gitignore` 中，不会被提交到版本控制。
这样可以保护您的 API Key 安全。

## 🔧 配置步骤

### 步骤 1: 创建/编辑 .env 文件

在项目根目录下创建或编辑 `.env` 文件：

```env
VITE_DEEPSEEK_API_KEY=sk-your-actual-key-here
```

### 步骤 2: 检查变量名

确保您的 `.env` 文件中的变量名是：
- `VITE_DEEPSEEK_API_KEY` （不是 `DEEPSEEK_API`）

如果您使用了其他名称，请修改为 `VITE_DEEPSEEK_API_KEY`。

### 步骤 3: 重启服务器

```bash
# Windows
按 Ctrl+C 停止
npm run dev

# 或者直接关闭终端重新运行
npm run dev
```

### 步骤 4: 验证配置

在浏览器控制台中，您可以检查环境变量是否加载：

```javascript
console.log(import.meta.env.VITE_DEEPSEEK_API_KEY)
```

如果输出了您的 API Key，说明配置成功！

## 📋 完整的 .env 示例

```env
# DeepSeek API Key（用于翻译审校）
VITE_DEEPSEEK_API_KEY=sk-d8fad050bff24a44a6fb030e1bb2032d

# Hugging Face Token（用于翻译，也可以在界面输入）
VITE_HF_API_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# 可选：自定义 API 端点
# VITE_DEEPSEEK_API_URL=https://api.deepseek.com/v1/chat/completions
# VITE_HF_API_URL=https://api-inference.huggingface.co/models/google/translategemma-4b-it
```

## 🔒 安全最佳实践

### 开发环境
- ✅ 使用 `.env` 文件存储 API Key
- ✅ 确保 `.env` 在 `.gitignore` 中
- ✅ 不要将 API Key 硬编码在代码中

### 生产环境
- ✅ 使用环境变量（不使用 .env 文件）
- ✅ 使用托管平台的环境变量功能（Vercel、Netlify 等）
- ✅ 定期轮换 API Key
- ✅ 限制 API Key 的权限和使用量

## 🌐 部署平台配置

### Vercel
```
Settings → Environment Variables
添加: VITE_DEEPSEEK_API_KEY = your-key
```

### Netlify
```
Site settings → Build & deploy → Environment
添加: VITE_DEEPSEEK_API_KEY = your-key
```

### GitHub Pages
由于 GitHub Pages 是纯静态托管，建议：
1. 构建时注入环境变量
2. 或改为在应用中让用户输入 API Key

## ❓ 常见问题

### Q: 为什么我的环境变量读取不到？

A: 可能的原因：
1. 变量名没有 `VITE_` 前缀
2. 修改后没有重启开发服务器
3. .env 文件位置不对（应该在项目根目录）
4. .env 文件格式错误（不要有引号或空格）

### Q: 可以在代码中直接看到 API Key 吗？

A: 可以。使用 `VITE_` 前缀的环境变量会被打包到前端代码中，
所以理论上用户可以在浏览器中看到。对于高度敏感的操作，
建议使用后端 API 代理。

### Q: .env.local 和 .env 有什么区别？

A: 
- `.env` - 所有环境的默认值
- `.env.local` - 本地覆盖（优先级更高，不会提交到 Git）
- `.env.production` - 生产环境专用
- `.env.development` - 开发环境专用

推荐使用 `.env.local` 存储个人 API Key。

## 📞 需要帮助？

如果配置遇到问题：
1. 检查 .env 文件内容和位置
2. 确认变量名是否正确（VITE_ 前缀）
3. 重启开发服务器
4. 查看浏览器控制台错误信息

---

**配置完成后，DeepSeek 审校功能将自动启用！** ✨
